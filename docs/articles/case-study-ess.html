<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Case-study: Correcting for measurement error in the European Social Survey • sqpr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Case-study: Correcting for measurement error in the European Social Survey">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sqpr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/accesing-sqp-api.html">Accessing the SQP API</a>
    </li>
    <li>
      <a href="../articles/case-study-ess.html">Case-study: Correcting for measurement error in the European Social Survey</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Case-study: Correcting for measurement error in the European Social Survey</h1>
                        <h4 class="author">Jorge Cimentada and Wiebke Weber</h4>
            
            <h4 class="date">2019-06-11</h4>
      
      
      <div class="hidden name"><code>case-study-ess.Rmd</code></div>

    </div>

    
    
<p>In this case study we will go through an applied example of the capabilities of the <code>sqpr</code> package. For a detailed example on accessing the SQP API, check out the ‘Accessing the SQP API’ vignette from the <code>sqpr</code> package.</p>
<p>We’ll begin by loading the packages we’ll use and the <code>sqpr</code> package.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(lavaan)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(dplyr)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(ggplot2)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(essurvey)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(sqpr)</code></pre></div>
<div id="read-the-data" class="section level2">
<h2 class="hasAnchor">
<a href="#read-the-data" class="anchor"></a>Read the data</h2>
<p>Let’s read in the data from the European Social Survey using the <code>essurvey</code> package and create a sum score of a number of variables. A sum score is literally the <code>sum</code> of a number of variables to create a composite score. Remember to replace your email as a character string instead of the argument <code>your_email</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ess7es &lt;-
<span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/essurvey/topics/import_country">import_country</a></span>(<span class="st">"Spain"</span>, <span class="dv">7</span>, ess_email) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/essurvey/topics/recode_missings">recode_missings</a></span>() 

<span class="co"># Create composite scores</span>
ess7es &lt;-
<span class="st">  </span>ess7es <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">poltrst =</span> trstprl <span class="op">+</span><span class="st"> </span>trstplt <span class="op">+</span><span class="st"> </span>trstprt,
         <span class="dt">serv =</span> stfedu <span class="op">+</span><span class="st"> </span>stfhlth,
         <span class="dt">systmrsp =</span> psppsgv <span class="op">+</span><span class="st"> </span>psppipl <span class="op">+</span><span class="st"> </span>ptcpplt)

selected_vars &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"trstprl"</span>, <span class="st">"trstplt"</span>, <span class="st">"trstprt"</span>,
                   <span class="st">"stfedu"</span>, <span class="st">"stfhlth"</span>, <span class="st">"psppsgv"</span>,
                   <span class="st">"psppipl"</span>, <span class="st">"ptcpplt"</span>, <span class="st">"ppltrst"</span>,
                   <span class="st">"polintr"</span>, <span class="st">"stflife"</span>, <span class="st">"stfeco"</span>,
                   <span class="st">"agea"</span>,<span class="st">"eisced"</span>)

composite_scores &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"poltrst"</span>, <span class="st">"serv"</span>, <span class="st">"systmrsp"</span>)

all_vars &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(composite_scores, selected_vars) <span class="co"># for using later</span></code></pre></div>
<p>So far we the original <code>tibble</code> with a few extra columns containing the composite sum scores:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ess7es
<span class="co">#&gt; # A tibble: 1,925 x 604</span>
<span class="co">#&gt;    name  essround edition proddate  idno cntry   tvtot    tvpol  ppltrst</span>
<span class="co">#&gt;    &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;dbl+l&gt; &lt;dbl+lb&gt; &lt;dbl+lb&gt;</span>
<span class="co">#&gt;  1 ESS7…        7 2.2     01.12.2…     1 ES    2 [0,5…  2 [0,5…  6 [6]  </span>
<span class="co">#&gt;  2 ESS7…        7 2.2     01.12.2…     3 ES    2 [0,5…  2 [0,5…  6 [6]  </span>
<span class="co">#&gt;  3 ESS7…        7 2.2     01.12.2…     4 ES    3 [Mor…  3 [Mor…  6 [6]  </span>
<span class="co">#&gt;  4 ESS7…        7 2.2     01.12.2…     5 ES    2 [0,5…  1 [Les…  7 [7]  </span>
<span class="co">#&gt;  5 ESS7…        7 2.2     01.12.2…     6 ES    5 [Mor…  4 [Mor… 10 [Mos…</span>
<span class="co">#&gt;  6 ESS7…        7 2.2     01.12.2…     7 ES    7 [Mor…  2 [0,5…  7 [7]  </span>
<span class="co">#&gt;  7 ESS7…        7 2.2     01.12.2…     8 ES    7 [Mor…  7 [Mor…  2 [2]  </span>
<span class="co">#&gt;  8 ESS7…        7 2.2     01.12.2…    10 ES    6 [Mor…  5 [Mor…  2 [2]  </span>
<span class="co">#&gt;  9 ESS7…        7 2.2     01.12.2…    12 ES    0 [No … NA        5 [5]  </span>
<span class="co">#&gt; 10 ESS7…        7 2.2     01.12.2…    14 ES    3 [Mor…  1 [Les…  3 [3]  </span>
<span class="co">#&gt; # … with 1,915 more rows, and 595 more variables: pplfair &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   pplhlp &lt;dbl+lbl&gt;, polintr &lt;dbl+lbl&gt;, psppsgv &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   actrolg &lt;dbl+lbl&gt;, psppipl &lt;dbl+lbl&gt;, cptppol &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   ptcpplt &lt;dbl+lbl&gt;, etapapl &lt;dbl+lbl&gt;, trstprl &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   trstlgl &lt;dbl+lbl&gt;, trstplc &lt;dbl+lbl&gt;, trstplt &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   trstprt &lt;dbl+lbl&gt;, trstep &lt;dbl+lbl&gt;, trstun &lt;dbl+lbl&gt;, vote &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   prtvtbat &lt;dbl+lbl&gt;, prtvtcbe &lt;dbl+lbl&gt;, prtvtech &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   prtvtdcz &lt;dbl+lbl&gt;, prtvede1 &lt;dbl+lbl&gt;, prtvede2 &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   prtvtcdk &lt;dbl+lbl&gt;, prtvteee &lt;dbl+lbl&gt;, prtvtces &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   prtvtcfi &lt;dbl+lbl&gt;, prtvtcfr &lt;dbl+lbl&gt;, prtvtbgb &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   prtvtehu &lt;dbl+lbl&gt;, prtvtaie &lt;dbl+lbl&gt;, prtvtcil &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   prtvalt1 &lt;dbl+lbl&gt;, prtvalt2 &lt;dbl+lbl&gt;, prtvalt3 &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   prtvtfnl &lt;dbl+lbl&gt;, prtvtbno &lt;dbl+lbl&gt;, prtvtcpl &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   prtvtbpt &lt;dbl+lbl&gt;, prtvtbse &lt;dbl+lbl&gt;, prtvtesi &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   contplt &lt;dbl+lbl&gt;, wrkprty &lt;dbl+lbl&gt;, wrkorg &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   badge &lt;dbl+lbl&gt;, sgnptit &lt;dbl+lbl&gt;, pbldmn &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   bctprd &lt;dbl+lbl&gt;, clsprty &lt;dbl+lbl&gt;, prtclcat &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   prtclcbe &lt;dbl+lbl&gt;, prtclech &lt;dbl+lbl&gt;, prtcldcz &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   prtclede &lt;dbl+lbl&gt;, prtclcdk &lt;dbl+lbl&gt;, prtcleee &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   prtcldes &lt;dbl+lbl&gt;, prtclcfi &lt;dbl+lbl&gt;, prtcldfr &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   prtclbgb &lt;dbl+lbl&gt;, prtclehu &lt;dbl+lbl&gt;, prtclcie &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   prtcldil &lt;dbl+lbl&gt;, prtclalt &lt;dbl+lbl&gt;, prtclenl &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   prtclbno &lt;dbl+lbl&gt;, prtclfpl &lt;dbl+lbl&gt;, prtcldpt &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   prtclbse &lt;dbl+lbl&gt;, prtclesi &lt;dbl+lbl&gt;, prtdgcl &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   lrscale &lt;dbl+lbl&gt;, stflife &lt;dbl+lbl&gt;, stfeco &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   stfgov &lt;dbl+lbl&gt;, stfdem &lt;dbl+lbl&gt;, stfedu &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   stfhlth &lt;dbl+lbl&gt;, gincdif &lt;dbl+lbl&gt;, freehms &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   euftf &lt;dbl+lbl&gt;, imsmetn &lt;dbl+lbl&gt;, imdfetn &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   eimpcnt &lt;dbl+lbl&gt;, impcntr &lt;dbl+lbl&gt;, imbgeco &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   imueclt &lt;dbl+lbl&gt;, imwbcnt &lt;dbl+lbl&gt;, happy &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   sclmeet &lt;dbl+lbl&gt;, inprdsc &lt;dbl+lbl&gt;, sclact &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   crmvct &lt;dbl+lbl&gt;, aesfdrk &lt;dbl+lbl&gt;, health &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   hlthhmp &lt;dbl+lbl&gt;, rlgblg &lt;dbl+lbl&gt;, rlgdnm &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   rlgdnbat &lt;dbl+lbl&gt;, rlgdnbe &lt;dbl+lbl&gt;, …</span></code></pre></div>
<p>Let’s read in the SQP data. First we login with <code><a href="../reference/sqp_login.html">sqp_login()</a></code> and for that to work we need to execute these two lines with our valid SQP credentials:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/sqp_login.html">sqp_login</a></span>(<span class="st">"your user name"</span>, <span class="st">"your password"</span>)</code></pre></div>
<p>Once that’s done, we can continue with accessing the data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">study_id &lt;-<span class="st"> </span><span class="kw"><a href="../reference/find_studies.html">find_studies</a></span>(<span class="st">"ESS Round 7"</span>)<span class="op">$</span>id

questions &lt;-
<span class="st">  </span>study_id <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="../reference/find_questions.html">find_questions</a></span>(selected_vars[<span class="dv">1</span><span class="op">:</span><span class="dv">12</span>]) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(country_iso <span class="op">==</span><span class="st"> "ES"</span>, language_iso <span class="op">==</span><span class="st"> "spa"</span>)</code></pre></div>
<p>Let’s confirm all of our questions were extracted.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/all">all</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/chartr">tolower</a></span>(questions<span class="op">$</span>short_name) <span class="op">%in%</span><span class="st"> </span>selected_vars[<span class="dv">1</span><span class="op">:</span><span class="dv">12</span>])
<span class="co">#&gt; [1] TRUE</span></code></pre></div>
<p>Why are we only selecting 12 variables? You’ll see later on. We will add the predicted estimates of the last two manually because they’re not in the SQP data base.</p>
<p>To wrap the SQP API related business, let’s grab the predicted estimates with <code>get_estimates</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sqp_data &lt;-
<span class="st">  </span><span class="kw"><a href="../reference/get_estimates.html">get_estimates</a></span>(questions<span class="op">$</span>id) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>(question)</code></pre></div>
<p>Alright, now we have a nicely formatted <code>tibble</code> from the SQP database in R.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sqp_data
<span class="co">#&gt; # A tibble: 12 x 4</span>
<span class="co">#&gt;    question reliability validity quality</span>
<span class="co">#&gt;    &lt;chr&gt;          &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;</span>
<span class="co">#&gt;  1 polintr        0.624    0.964   0.601</span>
<span class="co">#&gt;  2 ppltrst        0.737    0.952   0.702</span>
<span class="co">#&gt;  3 psppipl        0.762    0.928   0.707</span>
<span class="co">#&gt;  4 psppsgv        0.766    0.927   0.709</span>
<span class="co">#&gt;  5 ptcpplt        0.766    0.928   0.711</span>
<span class="co">#&gt;  6 stfeco         0.797    0.912   0.727</span>
<span class="co">#&gt;  7 stfedu         0.757    0.838   0.635</span>
<span class="co">#&gt;  8 stfhlth        0.76     0.798   0.607</span>
<span class="co">#&gt;  9 stflife        0.721    0.911   0.657</span>
<span class="co">#&gt; 10 trstplt        0.852    0.965   0.822</span>
<span class="co">#&gt; 11 trstprl        0.812    0.959   0.779</span>
<span class="co">#&gt; 12 trstprt        0.858    0.956   0.821</span></code></pre></div>
</div>
<div id="analysis" class="section level2">
<h2 class="hasAnchor">
<a href="#analysis" class="anchor"></a>Analysis</h2>
<p>With the function <code>sqpr_sscore</code> we can calculate the quality of a sum score. Remember those sum scores we calculated at the beginning? We can calculate the quality of the sum score by specifying the data from the SQP API, the data from the European Social Survey and provide <code>sqp_sscore</code> with the variables that contribute to the sum score.</p>
<p>For example, this code..</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/sqp_sscore.html">sqp_sscore</a></span>(<span class="dt">sqp_data =</span> sqp_data,
           <span class="dt">df =</span> ess7es,
           <span class="dt">new_name =</span> poltrst,
           trstprl, trstplt, trstprt)
<span class="co">#&gt; # A tibble: 10 x 4</span>
<span class="co">#&gt;    question reliability validity quality</span>
<span class="co">#&gt;    &lt;chr&gt;          &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;</span>
<span class="co">#&gt;  1 polintr        0.624    0.964   0.601</span>
<span class="co">#&gt;  2 ppltrst        0.737    0.952   0.702</span>
<span class="co">#&gt;  3 psppipl        0.762    0.928   0.707</span>
<span class="co">#&gt;  4 psppsgv        0.766    0.927   0.709</span>
<span class="co">#&gt;  5 ptcpplt        0.766    0.928   0.711</span>
<span class="co">#&gt;  6 stfeco         0.797    0.912   0.727</span>
<span class="co">#&gt;  7 stfedu         0.757    0.838   0.635</span>
<span class="co">#&gt;  8 stfhlth        0.76     0.798   0.607</span>
<span class="co">#&gt;  9 stflife        0.721    0.911   0.657</span>
<span class="co">#&gt; 10 poltrst       NA       NA       0.913</span></code></pre></div>
<p>creates a new variable called <code>poltrst</code> which will have the quality of the sum score of <code>trstprl</code>, <code>trstplt</code>, <code>trstprt</code>. Note that these three variables are <strong>not</strong> present anymore, but only <code>poltrst</code>, the summary of the three. For our analysis we want to repeat that for the three sum scores from the beginning. Let’s extend it:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Quality &lt;-
<span class="st">  </span>sqp_data <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="../reference/sqp_sscore.html">sqp_sscore</a></span>(<span class="dt">df =</span> ess7es, <span class="dt">new_name =</span> poltrst, trstprl, trstplt, trstprt) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="../reference/sqp_sscore.html">sqp_sscore</a></span>(<span class="dt">df =</span> ess7es, <span class="dt">new_name =</span> serv, stfedu, stfhlth) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="../reference/sqp_sscore.html">sqp_sscore</a></span>(<span class="dt">df =</span> ess7es, <span class="dt">new_name =</span> systmrsp, psppsgv, psppipl, ptcpplt) </code></pre></div>
<p>Let’s see how it looks like.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Quality
<span class="co">#&gt; # A tibble: 7 x 4</span>
<span class="co">#&gt;   question reliability validity quality</span>
<span class="co">#&gt;   &lt;chr&gt;          &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;</span>
<span class="co">#&gt; 1 polintr        0.624    0.964   0.601</span>
<span class="co">#&gt; 2 ppltrst        0.737    0.952   0.702</span>
<span class="co">#&gt; 3 stfeco         0.797    0.912   0.727</span>
<span class="co">#&gt; 4 stflife        0.721    0.911   0.657</span>
<span class="co">#&gt; 5 poltrst       NA       NA       0.913</span>
<span class="co">#&gt; 6 serv          NA       NA       0.748</span>
<span class="co">#&gt; 7 systmrsp      NA       NA       0.841</span></code></pre></div>
<p>Great! We have our summarized <code>tibble</code>. Sometimes you’ll want to manually append predictions such as quality estimates not available in the SQP API. For our case, we want to add the <code>quality</code> estimates of the variables <code>agea</code> and <code>eised</code> (remember those two we were excluding from before? we were excluding them because they’re not available in the SQP data base). For that we can use <code>sqp_bind_metrics</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Quality &lt;-<span class="st"> </span>
<span class="st">  </span>Quality <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="../reference/sqp_bind_metrics.html">sqp_bind_metrics</a></span>(agea, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">quality =</span> <span class="dv">1</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="../reference/sqp_bind_metrics.html">sqp_bind_metrics</a></span>(eisced, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">quality =</span> <span class="fl">0.93</span>))

Quality
<span class="co">#&gt; # A tibble: 9 x 4</span>
<span class="co">#&gt;   question reliability validity quality</span>
<span class="co">#&gt;   &lt;chr&gt;          &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;</span>
<span class="co">#&gt; 1 polintr        0.624    0.964   0.601</span>
<span class="co">#&gt; 2 ppltrst        0.737    0.952   0.702</span>
<span class="co">#&gt; 3 stfeco         0.797    0.912   0.727</span>
<span class="co">#&gt; 4 stflife        0.721    0.911   0.657</span>
<span class="co">#&gt; 5 poltrst       NA       NA       0.913</span>
<span class="co">#&gt; 6 serv          NA       NA       0.748</span>
<span class="co">#&gt; 7 systmrsp      NA       NA       0.841</span>
<span class="co">#&gt; 8 agea          NA       NA       1    </span>
<span class="co">#&gt; 9 eisced        NA       NA       0.93</span></code></pre></div>
<p>Note that <code>sqp_bind_metrics</code> is very strict, it accepts an <code>sqp</code> data frame (given by <code>get_estimates</code>) and it will match that the names of your estimates (<code>quality</code> here) matches exactly the same names in the SQP API. You can read more about it in <code><a href="../reference/sqp_bind_metrics.html">?sqp_bind_metrics</a></code>. Finally, let’s order our results.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">variables_order &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"poltrst"</span>,
                     <span class="st">"serv"</span>,
                     <span class="st">"systmrsp"</span>,
                     <span class="st">"ppltrst"</span>,
                     <span class="st">"polintr"</span>,
                     <span class="st">"stflife"</span>,
                     <span class="st">"stfeco"</span>,
                     <span class="st">"agea"</span>,
                     <span class="st">"eisced"</span>)

Quality &lt;-<span class="st"> </span>Quality[<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/match">match</a></span>(variables_order, Quality<span class="op">$</span>question), ]</code></pre></div>
<p>Briefly, let’s also select these variables for ESS data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ess7escorr &lt;-<span class="st"> </span>ess7es <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(variables_order)</code></pre></div>
</div>
<div id="correlations-and-correcting-for-measurement-error" class="section level2">
<h2 class="hasAnchor">
<a href="#correlations-and-correcting-for-measurement-error" class="anchor"></a>Correlations and correcting for measurement error</h2>
<p>Let’s get the correlation of all the variables in the ESS data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Exploratory correlation matrix (in order of the columns in data frame):</span>
original_corr_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/cor">cor</a></span>(ess7escorr, <span class="dt">use =</span> <span class="st">"complete.obs"</span>, <span class="dt">method =</span> <span class="st">"pearson"</span>)

original_corr_<span class="dv">2</span>
<span class="co">#&gt;              poltrst        serv    systmrsp     ppltrst       polintr</span>
<span class="co">#&gt; poltrst   1.00000000  0.42234347  0.60017274  0.18756402 -0.1998034262</span>
<span class="co">#&gt; serv      0.42234347  1.00000000  0.31451487  0.11161757 -0.0238949765</span>
<span class="co">#&gt; systmrsp  0.60017274  0.31451487  1.00000000  0.17976483 -0.2340428111</span>
<span class="co">#&gt; ppltrst   0.18756402  0.11161757  0.17976483  1.00000000 -0.1987630767</span>
<span class="co">#&gt; polintr  -0.19980343 -0.02389498 -0.23404281 -0.19876308  1.0000000000</span>
<span class="co">#&gt; stflife   0.13809045  0.18105357  0.14334382  0.14719373 -0.0407515829</span>
<span class="co">#&gt; stfeco    0.43680221  0.38492773  0.34387670  0.09057548 -0.1050462717</span>
<span class="co">#&gt; agea      0.03343543  0.01723621  0.01364820 -0.05888371  0.0002020306</span>
<span class="co">#&gt; eisced   -0.01546372 -0.05567295  0.05062386  0.16991291 -0.3124573975</span>
<span class="co">#&gt;              stflife      stfeco          agea      eisced</span>
<span class="co">#&gt; poltrst   0.13809045  0.43680221  0.0334354262 -0.01546372</span>
<span class="co">#&gt; serv      0.18105357  0.38492773  0.0172362098 -0.05567295</span>
<span class="co">#&gt; systmrsp  0.14334382  0.34387670  0.0136482010  0.05062386</span>
<span class="co">#&gt; ppltrst   0.14719373  0.09057548 -0.0588837086  0.16991291</span>
<span class="co">#&gt; polintr  -0.04075158 -0.10504627  0.0002020306 -0.31245740</span>
<span class="co">#&gt; stflife   1.00000000  0.27002646 -0.0375443228  0.07276395</span>
<span class="co">#&gt; stfeco    0.27002646  1.00000000  0.0165999850  0.03815190</span>
<span class="co">#&gt; agea     -0.03754432  0.01659999  1.0000000000 -0.22553987</span>
<span class="co">#&gt; eisced    0.07276395  0.03815190 -0.2255398662  1.00000000</span></code></pre></div>
<p><code>sqpr</code> has a very similar function to <code>cor</code> but allows to replace the diagonal. In our analysis we can use it to multiply the diagonal with the quality estimates of all the variables.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">corr_q2 &lt;-
<span class="st">  </span><span class="kw"><a href="../reference/sqp_correlate.html">sqp_correlate</a></span>(<span class="dt">x =</span> ess7escorr,
                <span class="dt">diag_adj =</span> Quality<span class="op">$</span>quality,
                <span class="dt">use =</span> <span class="st">"complete.obs"</span>,
                <span class="dt">method =</span> <span class="st">"pearson"</span>)

corr_q2
<span class="co">#&gt; # A tibble: 9 x 10</span>
<span class="co">#&gt;   rowname poltrst    serv systmrsp ppltrst  polintr stflife  stfeco</span>
<span class="co">#&gt;   &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;</span>
<span class="co">#&gt; 1 poltrst  0.913   0.422    0.600   0.188  -2.00e-1  0.138   0.437 </span>
<span class="co">#&gt; 2 serv     0.422   0.748    0.315   0.112  -2.39e-2  0.181   0.385 </span>
<span class="co">#&gt; 3 systmr…  0.600   0.315    0.841   0.180  -2.34e-1  0.143   0.344 </span>
<span class="co">#&gt; 4 ppltrst  0.188   0.112    0.180   0.702  -1.99e-1  0.147   0.0906</span>
<span class="co">#&gt; 5 polintr -0.200  -0.0239  -0.234  -0.199   6.01e-1 -0.0408 -0.105 </span>
<span class="co">#&gt; 6 stflife  0.138   0.181    0.143   0.147  -4.08e-2  0.657   0.270 </span>
<span class="co">#&gt; 7 stfeco   0.437   0.385    0.344   0.0906 -1.05e-1  0.270   0.727 </span>
<span class="co">#&gt; 8 agea     0.0334  0.0172   0.0136 -0.0589  2.02e-4 -0.0375  0.0166</span>
<span class="co">#&gt; 9 eisced  -0.0155 -0.0557   0.0506  0.170  -3.12e-1  0.0728  0.0382</span>
<span class="co">#&gt; # … with 2 more variables: agea &lt;dbl&gt;, eisced &lt;dbl&gt;</span></code></pre></div>
<p>It’s the same correlation coefficients but with the diagonal set to the quality of the estimates. But <strong>note</strong> that both the order of the variables <code>Quality</code> and the order of the variables in <code>ess7corr</code> should be the same! Otherwise we might confuse quality coefficients between variables.</p>
<p>We often want to calculate the Common Method Variance (CMV) of some of these observed variables because they share common methods such as likert scales, etc. The <code>sqpr</code> package makes this very easy using the <code>sqpr_cmv_cor</code> function. Supply the the correlation data frame, the <code>Quality</code> dataset with quality estimates and <code>sqp_cmv_cor</code> estimates the CMV between the variables specified (here only two) and subtracts it from the correlation.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#subtract the cmv from the observed correlation</span>
corr_q2_cmv &lt;-
<span class="st">  </span><span class="kw"><a href="../reference/sqp_cmv_cor.html">sqp_cmv_cor</a></span>(<span class="dt">x =</span> corr_q2,
              <span class="dt">sqp_data =</span> Quality,
              stfeco, stflife)

corr_q2_cmv
<span class="co">#&gt; # A tibble: 9 x 10</span>
<span class="co">#&gt;   rowname poltrst    serv systmrsp ppltrst  polintr stflife  stfeco</span>
<span class="co">#&gt;   &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;</span>
<span class="co">#&gt; 1 poltrst  0.913   0.422    0.600   0.188  -2.00e-1  0.138   0.437 </span>
<span class="co">#&gt; 2 serv     0.422   0.748    0.315   0.112  -2.39e-2  0.181   0.385 </span>
<span class="co">#&gt; 3 systmr…  0.600   0.315    0.841   0.180  -2.34e-1  0.143   0.344 </span>
<span class="co">#&gt; 4 ppltrst  0.188   0.112    0.180   0.702  -1.99e-1  0.147   0.0906</span>
<span class="co">#&gt; 5 polintr -0.200  -0.0239  -0.234  -0.199   6.01e-1 -0.0408 -0.105 </span>
<span class="co">#&gt; 6 stflife  0.138   0.181    0.143   0.147  -4.08e-2  0.657   0.203 </span>
<span class="co">#&gt; 7 stfeco   0.437   0.385    0.344   0.0906 -1.05e-1  0.203   0.727 </span>
<span class="co">#&gt; 8 agea     0.0334  0.0172   0.0136 -0.0589  2.02e-4 -0.0375  0.0166</span>
<span class="co">#&gt; 9 eisced  -0.0155 -0.0557   0.0506  0.170  -3.12e-1  0.0728  0.0382</span>
<span class="co">#&gt; # … with 2 more variables: agea &lt;dbl&gt;, eisced &lt;dbl&gt;</span></code></pre></div>
<p>Perhaps you can’t see it but the coefficient of the <code>stfeco</code> and <code>stflife</code> combination has gone down from <code>0.27</code> to <code>0.203</code>. More concretely, <code>sqp_cmv_cor</code> calculates the CMV and subtracts it from the correlation coefficient. A more directly example is:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cmv &lt;-
<span class="st">  </span>Quality <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(question <span class="op">%in%</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"stflife"</span>, <span class="st">"stfeco"</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span>sqpr<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/sqpr/topics/estimate_cmv">estimate_cmv</a></span>()

<span class="fl">0.27</span> <span class="op">-</span><span class="st"> </span>cmv
<span class="co">#&gt; [1] 0.2029138</span></code></pre></div>
<p>To finish off correcting for the measurement error, we transform the correlation to a covariance matrix, which is in itself a correlation matrix.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">corrected_corr &lt;-<span class="st"> </span>corr_q2_cmv <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="op">-</span>rowname) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">as.matrix</a></span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/cor">cov2cor</a></span>()

corrected_corr
<span class="co">#&gt;           poltrst        serv    systmrsp     ppltrst       polintr</span>
<span class="co">#&gt;  [1,]  1.00000000  0.51089817  0.68481184  0.23424735 -0.2696866313</span>
<span class="co">#&gt;  [2,]  0.51089817  1.00000000  0.39647636  0.15400643 -0.0356323296</span>
<span class="co">#&gt;  [3,]  0.68481184  0.39647636  1.00000000  0.23395775 -0.3291996309</span>
<span class="co">#&gt;  [4,]  0.23424735  0.15400643  0.23395775  1.00000000 -0.3060059835</span>
<span class="co">#&gt;  [5,] -0.26968663 -0.03563233 -0.32919963 -0.30600598  1.0000000000</span>
<span class="co">#&gt;  [6,]  0.17826853  0.25822558  0.19284019  0.21673950 -0.0648521773</span>
<span class="co">#&gt;  [7,]  0.53605746  0.52189944  0.43978136  0.12678704 -0.1589191383</span>
<span class="co">#&gt;  [8,]  0.03498651  0.01992584  0.01488253 -0.07027917  0.0002606033</span>
<span class="co">#&gt;  [9,] -0.01677901 -0.06673867  0.05724204  0.21028890 -0.4179382317</span>
<span class="co">#&gt;           stflife      stfeco          agea      eisced</span>
<span class="co">#&gt;  [1,]  0.17826853  0.53605746  0.0349865071 -0.01677901</span>
<span class="co">#&gt;  [2,]  0.25822558  0.52189944  0.0199258389 -0.06673867</span>
<span class="co">#&gt;  [3,]  0.19284019  0.43978136  0.0148825271  0.05724204</span>
<span class="co">#&gt;  [4,]  0.21673950  0.12678704 -0.0702791659  0.21028890</span>
<span class="co">#&gt;  [5,] -0.06485218 -0.15891914  0.0002606033 -0.41793823</span>
<span class="co">#&gt;  [6,]  1.00000000  0.29364211 -0.0463192577  0.09308766</span>
<span class="co">#&gt;  [7,]  0.29364211  1.00000000  0.0194688586  0.04639888</span>
<span class="co">#&gt;  [8,] -0.04631926  0.01946886  1.0000000000 -0.23387395</span>
<span class="co">#&gt;  [9,]  0.09308766  0.04639888 -0.2338739464  1.00000000</span></code></pre></div>
<p>Here we have a corrected matrix for both measurement error and for the common method variance of some variables. We can dump this into our <code>sem</code> models and get much better estimates.</p>
</div>
<div id="regression-model" class="section level2">
<h2 class="hasAnchor">
<a href="#regression-model" class="anchor"></a>Regression model</h2>
<p>Let’s run two regression models taken from Weber &amp; Werner (2018) and see how the results differ.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">model&lt;-<span class="st"> "poltrst ~ ppltrst + stflife + polintr + stfeco + serv + systmrsp + agea + eisced"</span>

<span class="co"># Model based on original correlation matrix</span>
fit &lt;-
<span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/lavaan/topics/sem">sem</a></span>(model,
      <span class="dt">sample.cov=</span>original_corr_<span class="dv">2</span>,
      <span class="dt">sample.nobs=</span> <span class="dv">1624</span>) 

<span class="co"># Model based on corrected correlation matrix </span>
fit.corrected &lt;-
<span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/lavaan/topics/sem">sem</a></span>(model,
      <span class="dt">sample.cov=</span>corrected_corr,
      <span class="dt">sample.nobs=</span> <span class="dv">1624</span>) </code></pre></div>
<p>Let’s look at how much the coefficients differ</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">coef_table &lt;-
<span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(fit, fit.corrected) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">lapply</a></span>(parameterestimates) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">lapply</a></span>(<span class="cf">function</span>(.x) <span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(.x, lhs <span class="op">==</span><span class="st"> "poltrst"</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">lapply</a></span>(<span class="cf">function</span>(.x) <span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(.x, rhs, est, ci.lower, ci.upper)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">model =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"original"</span>, <span class="st">"corrected"</span>), <span class="dt">each =</span> <span class="dv">9</span>))

coef_table <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/ggplot2/topics/ggplot">ggplot</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(rhs, est, <span class="dt">colour =</span> model)) <span class="op">+</span>
<span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/ggplot2/topics/geom_linerange">geom_linerange</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(<span class="dt">ymin =</span> ci.lower, <span class="dt">ymax =</span> ci.upper), <span class="dt">position =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/ggplot2/topics/position_dodge">position_dodge</a></span>(<span class="dt">width =</span> <span class="fl">0.5</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/ggplot2/topics/geom_point">geom_point</a></span>(<span class="dt">position =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/ggplot2/topics/position_dodge">position_dodge</a></span>(<span class="dt">width =</span> <span class="fl">0.5</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/ggplot2/topics/labs">labs</a></span>(<span class="dt">x =</span> <span class="st">"Predictors"</span>, <span class="dt">y =</span> <span class="st">"Estimated coefficients"</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/ggplot2/topics/ggtheme">theme_bw</a></span>()</code></pre></div>
<p><img src="case-study-ess_files/figure-html/unnamed-chunk-23-1.png" width="672"></p>
<p>It differs slightly between models (although strongly for the dependent variable). Another approach is getting the ratio between the corrected over the original model.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Relative increase (they don't only go up!):</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/coef">coef</a></span>(fit.corrected) <span class="op">/</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/coef">coef</a></span>(fit)
<span class="co">#&gt;  poltrst~ppltrst  poltrst~stflife  poltrst~polintr   poltrst~stfeco </span>
<span class="co">#&gt;            0.948            1.690            1.159            1.053 </span>
<span class="co">#&gt;     poltrst~serv poltrst~systmrsp     poltrst~agea   poltrst~eisced </span>
<span class="co">#&gt;            1.028            1.076            0.208            1.310 </span>
<span class="co">#&gt; poltrst~~poltrst </span>
<span class="co">#&gt;            0.786</span></code></pre></div>
<p>It looks like the results do differ substantially! Otherwise everything would be at <code>1</code>.</p>
<p>Moreover, the R-squares of the models differ quite substantially.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">R2_uncorr &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/lavaan/topics/lavInspect">inspect</a></span>(fit, <span class="st">'r2'</span>)
R2 &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/lavaan/topics/lavInspect">inspect</a></span>(fit.corrected, <span class="st">'r2'</span>)

<span class="co"># Change of R2:</span>
R2 <span class="op">-</span><span class="st"> </span>R2_uncorr
<span class="co">#&gt; poltrst </span>
<span class="co">#&gt;   0.114</span></code></pre></div>
<p>This case-study shows how adjusting for measurement error and Common Method Variance (CMV) can improve your estimates. We hope that you find the <code>sqpr</code> package useful for your estimations.</p>
<ul>
<li>Wiebke Weber and Hannah Werner (under review). “The correct(ed) political trust. A step-by-step explanation to correct for measurement error in the study of trust in political institutions.”, Social Indicators Research.</li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#read-the-data">Read the data</a></li>
      <li><a href="#analysis">Analysis</a></li>
      <li><a href="#correlations-and-correcting-for-measurement-error">Correlations and correcting for measurement error</a></li>
      <li><a href="#regression-model">Regression model</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Jorge Cimentada, Wiebke Weber.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
