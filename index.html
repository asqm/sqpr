<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Extract the Quality of your Survey Questions with SQP 3.0 • sqpr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Extract the Quality of your Survey Questions with SQP 3.0">
<meta property="og:description" content="Using the database of the SQP 3.0 API, sqpr allows downloading data on the quality of over 40,000 questions, including the quality, validity and reliability of each question.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">sqpr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/accesing-sqp-api.html">Accessing the SQP 3.0 API</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<div id="sqpr" class="section level2">
<h2 class="hasAnchor">
<a href="#sqpr" class="anchor"></a>sqpr <img src="reference/figures/sqpr_logo.png" align="right" width="200" height="200">
</h2>

<p>The <code>sqpr</code> package gives easy access to the API of the Survey Quality Prediction <a href="http://sqp.upf.edu/">website</a>, a data base that contains over 40,000 predictions on the quality of questions.</p>
</div>
<div id="important-changes" class="section level2">
<h2 class="hasAnchor">
<a href="#important-changes" class="anchor"></a>Important changes</h2>
<p>After the feedback received at the <a href="https://www.europeansurveyresearch.org/conferences/overview">ESRA 2019 conference</a>, the <code>sqpr</code> package has been decoupled into two packages. The first will be responsible for only obtaining the data from the SQP API (<code>sqpr</code>) and the second will have all the measurement error corrections implemented separately. This way, measurement error corrections can happen independently of the SQP software for anyone who has other survey quality information. This new package is still under construction and will be uploaded as soon as it has working value.</p>
<p>Currently, the <code>sqpr</code> package is not <strong>usable</strong>. This package is being tested on the new SQP 3.0 API and not on the published website of the SQP <a href="http://sqp.upf.edu/">here</a>.</p>
<p>If you have any questions, please contact us at <a href="mailto:cimentadaj@gmail.com">cimentadaj@gmail.com</a>.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p><code>sqpr</code> is not currently on CRAN but you can install the developing version of from Github with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># install.packages("devtools")</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">"sociometricresearch/sqpr"</span>)</a></code></pre></div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<div id="registration-and-logging-in" class="section level3">
<h3 class="hasAnchor">
<a href="#registration-and-logging-in" class="anchor"></a>Registration and logging in</h3>
<p>Register in the <a href="http://sqp.upf.edu/accounts/register/">SQP website</a> and confirm your registration through your email.</p>
<p>First, load the package in R and provide your registered credentials.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(sqpr)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw"><a href="reference/sqp_login.html">sqp_login</a></span>(<span class="st">'your username'</span>, <span class="st">'your password'</span>)</a></code></pre></div>
<p>For details on the login process see the <code>Accessing the SQP 3.0 API vignette</code> from the package.</p>
<p>Once you’ve ran <code><a href="reference/sqp_login.html">sqp_login()</a></code>, you’re all set to work with the SQP 3.0 3.0 API! No need to run it again unless you close the R session.</p>
</div>
</div>
<div id="exploring-the-sqp-3-0-api" class="section level2">
<h2 class="hasAnchor">
<a href="#exploring-the-sqp-3-0-api" class="anchor"></a>Exploring the SQP 3.0 API</h2>
<div id="quick-interaction" class="section level3">
<h3 class="hasAnchor">
<a href="#quick-interaction" class="anchor"></a>Quick interaction</h3>
<p>To explore the SQP 3.0 API quickly, <code>get_sqp</code> will be your main function. Assuming you know the study, question, country and language that you’re looking for, you can make one call to the SQP 3.0 API. Let’s try to get the question <code>tvtot</code> in Round 3 for Spain in Spanish.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">sp &lt;-</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="reference/get_sqp.html">get_sqp</a></span>(</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">    <span class="dt">study =</span> <span class="st">"ESS Round 1"</span>,</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">    <span class="dt">question_name =</span> <span class="st">"tvtot"</span>,</a>
<a class="sourceLine" id="cb3-5" data-line-number="5">    <span class="dt">country =</span> <span class="st">"es"</span>,</a>
<a class="sourceLine" id="cb3-6" data-line-number="6">    <span class="dt">lang =</span> <span class="st">"spa"</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7">  )</a>
<a class="sourceLine" id="cb3-8" data-line-number="8"></a>
<a class="sourceLine" id="cb3-9" data-line-number="9">sp</a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="co">#&gt; # A tibble: 1 x 4</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="co">#&gt;   question reliability validity quality</span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="co">#&gt;   &lt;chr&gt;          &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13"><span class="co">#&gt; 1 tvtot          0.731    0.939   0.686</span></a></code></pre></div>
<p>The country and language specification need to be in two and three letter codes respectively. A simple search on Google will yield two and three letter codes for country and language, feel free to explore them.</p>
<p><code>get_sqp</code> also allows to specify several variables:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">sp &lt;-</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="reference/get_sqp.html">get_sqp</a></span>(</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">    <span class="dt">study =</span> <span class="st">"ESS Round 1"</span>,</a>
<a class="sourceLine" id="cb4-4" data-line-number="4">    <span class="dt">question_name =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"tvtot"</span>, <span class="st">"trstprl"</span>, <span class="st">"ppltrst"</span>),</a>
<a class="sourceLine" id="cb4-5" data-line-number="5">    <span class="dt">country =</span> <span class="st">"es"</span>,</a>
<a class="sourceLine" id="cb4-6" data-line-number="6">    <span class="dt">lang =</span> <span class="st">"spa"</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7">  )</a>
<a class="sourceLine" id="cb4-8" data-line-number="8"></a>
<a class="sourceLine" id="cb4-9" data-line-number="9">sp</a>
<a class="sourceLine" id="cb4-10" data-line-number="10"><span class="co">#&gt; # A tibble: 3 x 4</span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="co">#&gt;   question reliability validity quality</span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12"><span class="co">#&gt;   &lt;chr&gt;          &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb4-13" data-line-number="13"><span class="co">#&gt; 1 tvtot          0.731    0.939   0.686</span></a>
<a class="sourceLine" id="cb4-14" data-line-number="14"><span class="co">#&gt; 2 ppltrst        0.724    0.956   0.692</span></a>
<a class="sourceLine" id="cb4-15" data-line-number="15"><span class="co">#&gt; 3 trstprl        0.828    0.902   0.747</span></a></code></pre></div>
<p>Additionally, you can also use regular expressions:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">sp &lt;-</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="reference/get_sqp.html">get_sqp</a></span>(</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">    <span class="dt">study =</span> <span class="st">"ESS Round 1"</span>,</a>
<a class="sourceLine" id="cb5-4" data-line-number="4">    <span class="dt">question_name =</span> <span class="st">"^tv"</span>,</a>
<a class="sourceLine" id="cb5-5" data-line-number="5">    <span class="dt">country =</span> <span class="st">"es"</span>,</a>
<a class="sourceLine" id="cb5-6" data-line-number="6">    <span class="dt">lang =</span> <span class="st">"spa"</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7">  )</a>
<a class="sourceLine" id="cb5-8" data-line-number="8"></a>
<a class="sourceLine" id="cb5-9" data-line-number="9">sp</a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="co">#&gt; # A tibble: 2 x 4</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="co">#&gt;   question reliability validity quality</span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="co">#&gt;   &lt;chr&gt;          &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13"><span class="co">#&gt; 1 tvtot          0.731    0.939   0.686</span></a>
<a class="sourceLine" id="cb5-14" data-line-number="14"><span class="co">#&gt; 2 tvpol         NA       NA      NA</span></a></code></pre></div>
</div>
<div id="manual-searching" class="section level3">
<h3 class="hasAnchor">
<a href="#manual-searching" class="anchor"></a>Manual searching</h3>
<p>The previos step assumes you’re well aware of the studies available and some of the country/languages available. Alternatively, you can query all the questions in a specific study to check whether a specific question has quality predictions. Use <code>find_studies</code> to locate whether your study is in the SQP 3.0 database.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw"><a href="reference/find_studies.html">find_studies</a></span>(<span class="st">"ESS Round 4"</span>)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="co">#&gt; # A tibble: 1 x 2</span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="co">#&gt;      id name       </span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt;      </span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="co">#&gt; 1     4 ESS Round 4</span></a></code></pre></div>
<p>Great! Once we have that, we can use it to find all of it’s questions with <code>find_questions</code>. <code>find_questions</code> accepts the study that you’re looking for and a string that specifies the questions that you’re looking for. Let’s search for all questions that have <code>tv</code> in the name:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">q_ess &lt;-<span class="st"> </span><span class="kw"><a href="reference/find_questions.html">find_questions</a></span>(<span class="st">"ESS Round 4"</span>, <span class="st">"tv"</span>)</a></code></pre></div>
<p>That might take a while because it’s downloading all of the data to your computer. If you want to know all the questions in that study beforehand, use <code><a href="reference/find_questions.html">get_questions("ESS Round 4")</a></code>.</p>
<p>Let’s query further down to get the language for a specific question:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">sp_tv &lt;-<span class="st"> </span>q_ess[q_ess<span class="op">$</span>language_iso <span class="op">==</span><span class="st"> "spa"</span>, ]</a>
<a class="sourceLine" id="cb8-2" data-line-number="2">sp_tv</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="co">#&gt; # A tibble: 3 x 5</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co">#&gt;      id study_id short_name country_iso language_iso</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="co">#&gt;   &lt;int&gt;    &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;       </span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="co">#&gt; 1  7999        4 TvTot      ES          spa         </span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="co">#&gt; 2 27699        4 TvPol      ES          spa         </span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"><span class="co">#&gt; 3 27638        4 PrtVtxx    ES          spa</span></a></code></pre></div>
<p>The hard part is done now. Once we have the <code>id</code> of your questions of interest, we supply it to <code>get_estimates</code> and it will bring the quality predictions for those questions.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">predictions &lt;-<span class="st"> </span><span class="kw"><a href="reference/get_estimates.html">get_estimates</a></span>(sp_tv<span class="op">$</span>id)</a>
<a class="sourceLine" id="cb9-2" data-line-number="2">predictions</a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="co">#&gt; # A tibble: 3 x 4</span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="co">#&gt;   question reliability validity quality</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="co">#&gt;   &lt;chr&gt;          &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="co">#&gt; 1 tvtot          0.713    0.926    0.66</span></a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="co">#&gt; 2 tvpol         NA       NA       NA   </span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="co">#&gt; 3 prtvtxx       NA       NA       NA</span></a></code></pre></div>
<p><code>get_estimates</code> will return all question names as lower case for increasing the chances of compatibility with the name in the questionnaire of the study.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Jorge Cimentada <br><small class="roles"> Author, maintainer </small>  </li>
<li>Wiebke Weber <br><small class="roles"> Author </small>  </li>
</ul>
</div>

      <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=sqpr"><img src="https://www.r-pkg.org/badges/version/sqpr" alt="CRAN status"></a></li>
<li><a href="https://travis-ci.org/sociometricresearch/sqpr"><img src="https://travis-ci.org/sociometricresearch/sqpr.svg?branch=master" alt="Travis build status"></a></li>
<li><a href="https://ci.appveyor.com/project/cimentadaj/sqpr"><img src="https://ci.appveyor.com/api/projects/status/github/sociometricresearch/sqpr?branch=master&amp;svg=true" alt="AppVeyor build status"></a></li>
<li><a href="https://codecov.io/gh/sociometricresearch/sqpr?branch=master"><img src="https://codecov.io/gh/sociometricresearch/sqpr/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Jorge Cimentada, Wiebke Weber.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
